<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chative Invitation</title>
</head>
<body>
<div style="background: #f5f5f5; position: absolute;width: 100%;height: 100%;left: 0;top: 0" >
    <div style="position: absolute; left: 16%;right: 75%;top:14%;bottom: 81%;">
        <img src="icon.svg" style="position: relative;width: 130px">
        <span style="font-family: system-ui; font-style: normal;font-weight: 700; font-size: 100px; line-height: 200px; color: #001c4E">Chative</span>
        <span style="font-family: system-ui;font-style: normal; font-weight: 400; font-size: 50px; line-height: 1px; color: #001c4E ">Contact&nbsp;Anytime,Anywhere</span>
        <button style="
            align-items: center;
            padding: 8px 16px;
            position: absolute;
            width: 350px;
            height: 100px;
            margin-top: 30px;
            background: #001C4E;
            font-size: 30px;
            border-radius: 16px;
            color: white;
            font-family: system-ui;
" onclick="window.location.replace('https://apps.apple.com/hk/app/chative/id6443719300?l=en')" >Install on AppStore <p style="display:inline;font-size:36px;">ï£¿</p></button>
    </div>
    <div  style="position: relative; width: 100%; height: 50%; left: 0px; top: 50%; background: #056FFA;border-radius: 0px 44px 0px 0px;">
       <div onclick="window.location.replace(appurl)">
        <div style="
            position: absolute;
            font-family: system-ui;
            font-weight: 400;
            font-size: 43px;
            color: white;
            font-style: normal;
            top: 12.5%;
            left: 44%;
            transform: translate(-50%);
            text-align: left;
        ">Then, tap here to register with your invite code</div>
        <div style="
            float: right;
            position: absolute;
            top: 14%;
            right: 15%;
         ">
            <img src="arrow.svg" style="width: 80px">
        </div>
       </div>
    </div>
</div>
</body>
<script defer>
    function isWechat() {
        let ua = navigator.userAgent.toLowerCase(), flag = false;
        if(ua.indexOf("micromessenger") > -1){
            flag = true;
        }else {
            flag = false;
        }
        return flag;
    }

    function isIosOrAndroid(){
        let ua = navigator.userAgent;
        if (/(Android)/i.test(ua)){
            return 'Android';
        }
        if (/(iPhone|iPad|ipod|iOS)/i.test(ua)){
            return 'Ios';
        }
    }
    function isPc(){
        let ua = navigator.userAgent;
        let Agents = new Array("Android","iPhone","iPad","iPod","SymbianOS","Windows Phone");
        let flag = true;
        for (let i = 0; i < Agents.length; i++) {
            if (ua.indexOf(Agents[i]) > 0){
                flag = false;
                break;
            }
        }
        return flag;
    }

    function showWechatGuide() {
        try {
            if (document.getElementsByClassName("j-guide").length > 0) return;
            const e = document.createElement("div");
            e.className = "j-guide", e.style.position = "fixed", e.style.left = "0px", e.style.top = "0px", e.style.right = "0px", e.style.bottom = "0px", e.style.backgroundColor = "rgba(0, 0, 0, 0.8)", e.style.zIndex = "99";
            const t = new Image;
            t.src = "wechatmasktip.png", t.style.position = "absolute", t.style.width = "550px", t.style.top = "13px", t.style.right = "24px", e.appendChild(t), e.addEventListener("touchmove", (e => {
                e.stopPropagation(), e.preventDefault()
            })), e.addEventListener("click", (t => {
                t.stopPropagation(), t.preventDefault(), e && document.body.removeChild(e)
            })), document.body.appendChild(e)
        } catch (e) {
            console.error(e)
        }
    }

    // Get parameters
    params = new URLSearchParams(window.location.search).toString();

    // Redirect to the right page according to the device type.
    if (isIosOrAndroid() === 'Android'){
        window.location.href = 'androidIndex.html?' + params;
    } else if (isPc()){
        window.location.href = '../index.html?' + params;
    } else {
        // Guide the user to open this page with browsers if the container is WeChat.
        if (isWechat()) {
            showWechatGuide();
        }

        // Try to launch Chative app.
        appurl = "chative://invite/?" + params;
        window.location.replace(appurl);
    }
</script>
</html>
